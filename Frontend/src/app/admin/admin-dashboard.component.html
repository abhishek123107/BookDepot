<div class="admin-dashboard p-6 bg-gray-50 min-h-screen">
  <h1 class="text-2xl font-bold mb-6">ðŸ“š Admin Dashboard</h1>

  <!-- Tabs -->
  <ul class="tabs mb-4 flex gap-4">
    <li
      [class.active]="activeTab === 'books'"
      (click)="setActiveTab('books')"
      class="cursor-pointer"
    >
      Books
    </li>
    <li
      [class.active]="activeTab === 'orders'"
      (click)="setActiveTab('orders')"
      class="cursor-pointer"
    >
      Orders
    </li>
    <li
      [class.active]="activeTab === 'users'"
      (click)="setActiveTab('users')"
      class="cursor-pointer"
    >
      Users
    </li>
  </ul>

  <!-- Books Section -->
  <div *ngIf="activeTab === 'books'">
    <div class="card mb-6">
      <div class="card-content flex flex-col p-4">
        <h2 class="text-xl font-semibold mb-2">Add New Book</h2>
        <form
          (ngSubmit)="addBook()"
          #bookForm="ngForm"
          class="grid gap-2 md:grid-cols-2"
        >
          <input
            type="text"
            class="p-2 border"
            placeholder="Book Title"
            [(ngModel)]="newBook.title"
            name="title"
            required
          />
          <input
            type="text"
            class="p-2 border"
            placeholder="Author"
            [(ngModel)]="newBook.author"
            name="author"
            required
          />
          <input
            type="number"
            class="p-2 border"
            placeholder="Price"
            [(ngModel)]="newBook.price"
            name="price"
            required
          />
          <input
            type="text"
            class="p-2 border"
            placeholder="Category"
            [(ngModel)]="newBook.category"
            name="category"
            required
          />
          <input
            type="text"
            class="p-2 border"
            placeholder="Image URL"
            [(ngModel)]="newBook.image"
            name="image"
          />
          <button type="submit" class="btn btn-primary col-span-2 mt-2">
            ï¼‹ Add Book
          </button>
        </form>
      </div>
    </div>

    <table class="table w-full border">
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Author</th>
          <th>Price</th>
          <th>Category</th>
          <th>Image</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let book of books">
          <td>{{ book.id }}</td>
          <td>{{ book.title }}</td>
          <td>{{ book.author }}</td>
          <td>â‚¹{{ book.price }}</td>
          <td>{{ book.category }}</td>
          <td><img [src]="book.image" alt="Book Image" width="60" /></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Orders Section -->
  <div *ngIf="activeTab === 'orders'">
    <div class="card mb-6">
      <div class="card-content p-4">
        <h2 class="text-xl font-semibold">Confirmed Orders</h2>
      </div>
    </div>
    <table class="table w-full border">
      <thead>
        <tr>
          <th>ID</th>
          <th>Customer</th>
          <th>Total</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of orders">
          <td>{{ order.id }}</td>
          <td>{{ order.customer }}</td>
          <td>â‚¹{{ order.total }}</td>
          <td>{{ order.status }}</td>
          <td>
            <button class="btn" (click)="openOrderDetails(order)">
              Details
            </button>
            <button class="btn" (click)="changeOrderStatus(order, 'tracking')">
              Set Tracking
            </button>
            <button class="btn" (click)="changeOrderStatus(order, 'delivered')">
              Mark Delivered
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Users Section -->
  <div *ngIf="activeTab === 'users'">
    <div class="card mb-6">
      <div class="card-content p-4">
        <h2 class="text-xl font-semibold">Registered Users</h2>
      </div>
    </div>
    <table class="table w-full border">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users">
          <td>{{ user.id }}</td>
          <td>{{ user.name }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.role }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Order Details Modal -->
  <div *ngIf="selectedOrder" class="modal">
    <div class="modal-content">
      <h3>Order Details</h3>
      <p><strong>Book:</strong> {{ selectedOrder.book?.title }}</p>
      <p><strong>Author:</strong> {{ selectedOrder.book?.author }}</p>
      <p><strong>Customer:</strong> {{ selectedOrder.customer_name }}</p>
      <label for="editAddress"><strong>Address:</strong></label>
      <textarea
        id="editAddress"
        rows="3"
        [(ngModel)]="selectedOrder.address"
        class="w-full p-2 border"
      ></textarea>
      <p><strong>Phone:</strong> {{ selectedOrder.phone }}</p>
      <p><strong>Status:</strong> {{ selectedOrder.status }}</p>
      <div class="mt-2 flex gap-2">
        <button class="btn btn-primary" (click)="saveOrderAddress()">
          Save Address
        </button>
        <button class="btn" (click)="closeOrderDetails()">Close</button>
      </div>
    </div>
  </div>
</div>
<router-outlet></router-outlet>
