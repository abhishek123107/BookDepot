<div class="body">
  <header>
    <h1>Library Management System</h1>
    <p>Manage your books efficiently</p>
  </header>

  <nav>
    <div class="dropdown">
      <button class="dropbtn" (click)="toggleDropdown()">
        {{ dropbtn }}
      </button>

      <div class="dropdown-content" *ngIf="isOpen">
        <th>Categories</th>
        <a *ngFor="let c of bookCategory" (click)="selectSection(c)">{{ c }}</a>
      </div>
    </div>
  </nav>
  <div class="dropdown-child-content" *ngIf="isChildrenBooks">
    <a routerLink="/customer/home">Science</a>
    <a routerLink="/customer/home">Social-Science</a>
    <a routerLink="/customer/home">Mathematics</a>
    <a routerLink="/customer/home">English</a>
    <a routerLink="/customer/home">Hindi</a>
    <a routerLink="/customer/home">Sanskrit</a>
  </div>

  <div class="container">
    <!-- Search Bar -->
    <div class="search-bar">
      <input
        type="text"
        id="searchInput"
        placeholder="Search books ..."
        [(ngModel)]="searchText"
      />
    </div>

    <!-- Books Table -->
    <h2 id="books">{{ selectedSection }} Books</h2>

    <div class="table-container">
      <table id="bookTable">
        <thead>
          <tr>
            <th>Book-Name</th>
            <th>Author</th>
            <th>View & Read</th>
          </tr>
        </thead>
      </table>
    </div>
    <div class="table-container">
      <div class="table-scroll">
        <table>
          <tbody>
            <tr *ngFor="let book of currentBooks | filter : searchText">
              <td>{{ book.title }}</td>
              <td>{{ book.author }}</td>
              <td>
                <ng-container *ngIf="book.pdf; else noPdf">
                  <a [href]="book.pdf" target="_blank">View PDF</a>
                </ng-container>
                <ng-template #noPdf>
                  <span>Not available</span>
                </ng-template>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Add Book Form -->
    <h2 id="add-book" style="margin-top: 2rem">Add New Book</h2>
    <form id="bookForm" (submit)="addBook(); $event.preventDefault()">
      <input
        type="text"
        id="title"
        placeholder="Book Title"
        [(ngModel)]="newTitle"
        name="title"
        required
      />
      <input
        type="text"
        id="author"
        placeholder="Author"
        [(ngModel)]="newAuthor"
        name="author"
        required
      />

      <!-- Local PDF upload (client-side preview only in this demo) -->
      <label for="localPdf">Choose your PDF file</label>
      <input
        type="file"
        id="localPdf"
        accept="application/pdf"
        (change)="onPdfSelected($event)"
      />
      <div *ngIf="previewPdfUrl">
        <a [href]="previewPdfUrl" target="_blank">Preview selected PDF</a>
      </div>

      <!-- Or choose from system library -->
      <label for="libraryPdf"></label>
      <select
        id="libraryPdf"
        [(ngModel)]="selectedLibraryPdf"
        name="libraryPdf"
      >
        <option *ngFor="let p of availablePdfs" [value]="p">{{ p }}</option>
      </select>

      <input
        type="text"
        id="pdf"
        placeholder="PDF URL (optional)"
        [(ngModel)]="newPdf"
        name="pdf"
      />
      <select id="category" [(ngModel)]="selectedSection" name="category">
        <option *ngFor="let category of bookCategory">{{ category }}</option>
      </select>

      <button type="submit">Add Book</button>
    </form>
  </div>

  <footer>
    <p>Â© 2025 Library Management System</p>
  </footer>
</div>
